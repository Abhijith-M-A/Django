from django.shortcuts import render
from django.http import HttpResponse
import time

# Create your views here.
temper = []
temper1 = []
def home(request):
    return render(request , 'first.html')

def second(request):
    return render(request , 'second.html')

def third(request):
    
    return render(request ,'third.html')
u = 0
frr = []
name_payer =[]
def forth(request):
    global temper
    global temper1
    global u
    global frr
    frr.append(u)
    global name_payer
    amount_payer = []
    u+=1
    payer = u
    temp2 = request.POST.get('temp')
    temp1 = request.POST.get('temp1')
    name_payer.append(temp2)
    amount_payer.append(temp1)
    temp = temp2 + '   -   Rs.'+ temp1
    temper.append(temp)
    temper1.append(temp1)
    return render(request,'second.html',{'temp':temper , 'temp1':temper1 , 'loop':frr})


    
def modal(request):
    return render(request,'modal.html')
def modalsec(request):
    return render(request,'modalsec.html')
namer =[]
def fifth(request):
    global name_payer
    global namer
    temp5 = request.POST.get('temp5')
    namer.append(temp5)
    name_payer.append(temp5)
    return render(request,'third.html',{'tempt':namer})

def forths(request):
    global temper
    global temper1
    return render(request , 'forths.html' , {'temper':temper , 'temper1':temper1})



def delete(request):
    global name_payer
    global namer
    kk = len(namer)-1
    namer.pop(kk)
    pp = len(name_payer)-1
    name_payer.pop(pp)
    return render(request,'third.html',{'tempt':namer})

def deleter(request):
    global name_payer
    global temper
    global amount_payer
    ss = len(amount_payer) -1 
    amount_payer.pop(ss)
    rr = len(temper)-1
    temper.pop(rr)
    qq = len(name_payer)-1
    name_payer.pop(qq)
    return render(request,'second.html',{'temp':temper})

def test(request):
    amount_decr = []
    amount_debit1 = []
    amount_debit2 = []
    amount_tempdecr1 = []
    amount_tempdecr2 = []
    commpr =[]
    global amount_payer
    global name_payer
    amount_total = 0
    num = len(name_payer)
    payer = len(amount_payer)

    for i in range(0,payer):
        amount_total = amount_total + amount_payer[i]

    amount_each = amount_total//num

    for i in range(0,num):
        temp2 = amount_payer[i] - amount_each
        amount_decr.append(temp2)
    for p in range(0,payer):
        first_pr = "\n"+ ' ' + name_payer[p]+' ' + "will get a total amount of Rs." + ' ' + amount_decr[p] + '\n'
        commpr.append(first_pr)
 

    for i in range(0,payer):
        temp10 = amount_decr[i]
        amount_tempdecr1.append(temp10)
        for j in range(payer,num):
            temp11 = amount_decr[j]
            amount_tempdecr2.append(temp11)
            if(amount_decr[j]!=0):
                if((amount_tempdecr1[i]-(0-amount_decr[j]))==0):
                    second_pr = "\n" + ' ' + name_payer[i]+ ' ' + "will get Rs." + ' ' + 0-amount_decr[j] + ' ' + "from" + ' ' + name_payer[j] + ' '
                    commpr.append(second_pr)
                    amount_tempdecr1[i] = 0
                    amount_decr[j] = 0
                    break
                
                if((amount_tempdecr1[i]-(0-amount_decr[j]))>0):
                                
                    temp4 = 0-amount_decr[j]
                    amount_debit1.append(temp4)
                    third_pr = "\n" + ' ' + name_payer[i] + ' ' + "will get Rs." + ' ' + temp4 + ' ' + "from" + ' ' +name_payer[j]
                    commpr.append(third_pr)
                    amount_tempdecr1[i] = amount_tempdecr1[i] + amount_decr[j]
                    amount_decr[j]=0
                
                if((amount_tempdecr1[i]-(0-amount_decr[j]))<0):
                
                    temp5 = (amount_tempdecr1[i]+amount_decr[j])
                    fourth_pr = "\n" + ' ' + name_payer[i] + ' ' + "will get Rs." + ' ' + amount_tempdecr1[i] + ' ' + "from"+ ' ' + name_payer[j]
                    commpr.append(fourth_pr)
                    amount_debit2.append(amount_tempdecr1[i])
                    amount_decr.pop(j)
                    amount_decr.insert(j,temp5)
                    amount_tempdecr1[i] = 0
                    break

    return render(request ,'test.html')